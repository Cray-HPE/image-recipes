<?xml version="1.0" encoding="utf-8"?>

<image schemaversion="6.8" name="cray-centos75-barebones">
    <description type="system">
        <author>Cray Inc</author>
        <contact>sps@cray.com</contact>
        <specification>
        	Barebones CentOS 7.5 Recipe
        </specification>
    </description>
    <preferences>
        <version>1.2.6</version>
        <packagemanager>yum</packagemanager>
        <bootsplash-theme>charge</bootsplash-theme>
        <locale>en_US</locale>
        <keytable>us</keytable>
        <timezone>UTC</timezone>
        <rpm-check-signatures>false</rpm-check-signatures>
        <type image="iso" flags="overlay" hybrid="true" firmware="uefi" hybridpersistent_filesystem="ext4" hybridpersistent="true"/>
        <type image="vmx" primary="true" filesystem="ext3" kernelcmdline="rhgb" bootloader="grub2" firmware="uefi"/>
        <type image="oem" initrd_system="dracut" filesystem="ext3" installiso="true" bootloader="grub2" firmware="uefi">
            <oemconfig>
                <oem-systemsize>2048</oem-systemsize>
                <oem-swap>true</oem-swap>
                <oem-swapsize>200</oem-swapsize>
                <oem-multipath-scan>false</oem-multipath-scan>
            </oemconfig>
        </type>
        <type image="ext4"/>
        <type image="squashfs"/>
        <type image="tbz"/>
    </preferences>
    <users>
        <user password="$1$3q2018$sPjSV98xEd0Nui0JGQXFh." home="/root" name="root" groups="root"/>
    </users>
    <repository type="rpm-md" alias="centos">
        <source path="https://dst.us.cray.com/dstrepo/dst-artifacts/OS/centos/7.5.1804/base/"/>
    </repository>
    <repository type="rpm-md" alias="updates">
        <source path="https://dst.us.cray.com/dstrepo/dst-artifacts/OS/centos/7.5.1804/updates/"/>
    </repository>
    <repository type="rpm-md" alias="extras">
        <source path="https://dst.us.cray.com/dstrepo/dst-artifacts/OS/centos/7.5.1804/extras"/>
    </repository>
    <repository type="rpm-md" alias="epel">
        <source path="https://dst.us.cray.com/dstrepo/dst-artifacts/OS/epel/7/x86_64/epel/"/>
    </repository>
    <!-- RM repo -->
    <repository type="rpm-md" priority="1" alias="rm">
        <source path="https://car.dev.cray.com/artifactory/internal/RM/centos_7_5_standard/x86_64/dev/master/"/>
    </repository>
    <packages type="image">
    <!-- Base OS packages -->
        <namedCollection name="anaconda-tools"/>
        <namedCollection name="base"/>
        <namedCollection name="compat-libraries"/>
        <namedCollection name="core"/>
        <namedCollection name="debugging"/>
        <namedCollection name="development"/>
        <namedCollection name="file-server"/>
        <namedCollection name="network-file-system-client"/>
        <package name="grub2-efi-x64"/>
        <package name="lshw "/>
        <package name="vim "/>
        <package name="dracut"/>
        <package name="dracut-tools"/>
        <package name="kernel"/>
        <package name="passwd  "/>
        <package name="syslinux "/>
        <package name="openssh-server"/>
        <package name="yum "/>
        <package name="shim "/>
        <package name="grub2-efi"/>
        <package name="dracut-network "/>
        <package name="numactl-libs "/>
        <package name="gtk2 "/>
        <package name="atk"/>
        <package name="cairo"/>
        <package name="gcc-gfortran"/>
        <package name="libxml2-python "/>
        <package name="tcsh"/>
        <package name="lsof "/>
        <package name="ethtool "/>
        <package name="tcl"/>
        <package name="tk  "/>
        <package name="plymouth-theme-charge"/>
        <package name="nfs-utils"/>
        <package name="nfs-utils"/>
        <!-- LDAP packages -->
        <package name="openldap-clients"/>
        <package name="nss-pam-ldapd"/>
        <package name="pam_ldap"/>
        <package name="nscd"/>
        <!-- 3rd Party packages -->
    </packages>
    <packages type="iso">
        <package name="dracut-kiwi-live"/>
    </packages>
    <packages type="oem">
        <package name="dracut-kiwi-oem-repart"/>
        <package name="dracut-kiwi-oem-dump"/>
    </packages>
    <packages type="bootstrap">
        <package name="filesystem"/>
        <package name="basesystem"/>
        <package name="yum-plugin-priorities"/>
        <package name="grub2-efi-modules"/>
        <package name="grub2-efi"/>
        <package name="shim" arch="x86_64"/>
    </packages>
</image>
